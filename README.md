# Node-1
[![GitHub tag (latest by date)](https://img.shields.io/github/v/tag/olegsh-dev/Node-1?label=version)](https://github.com/OlegSh-dev/Node-1/releases/)
### Учебный проект по созданию сервера на Node.js с использованием фреймворка Express.js.
  
##### Посмотреть онлайн: https://mesto-service.ml & https://api.mesto-service.ml & 84.201.169.101
  
#### Цель
Создание сервера на Node.js для сервиса Mesto по размещению фотокарточек с красивыми местами нашей планеты.

#### Функциональность API
БД должна быть доступна по mongodb://localhost:27017/mestodb;
1. GET-запрос на адрес localhost:3000/users вернёт всех пользователей из БД;
2. GET-запрос на адрес localhost:3000/cards вернёт все карточки из БД;
3. GET-запрос на адрес вида localhost:3000/users/8340d0ec33270a25f2413b69 вернёт конкрутного пользователя с переданным после /users идентификатором;
4. Если пользователя с запрошенным идентификатором нет, API вернёт 404 статус ответа и JSON: { "message": "Нет пользователя с таким id" };
5. POST-запрос на адрес localhost:3000/signup создаст в БД пользователя (регистрация по email и паролю). Пароль при этом хэшируется и записывается в БД в виде хэша. Длина пароля не должна быть меньше 5 символов;
6. POST-запрос на адрес localhost:3000/signin авторизует пользователя на сервисе, если он до этого прошел процедуру регистрации. При входе браузер получает httpOnly-куку с токеном, которые живут 7 дней;
7. POST-запрос на адрес localhost:3000/cards создаст в БД карточку;
8. DELETE-запрос на адрес вида localhost:3000/cards/8340d0ec33270a25f2413b69 удаляет карточку, если текущий пользователь является ее владельцем. В противном случае API вернёт 403 статус ответа и JSON: { "message": "Недостаточно прав" };
9. PATCH-запрос на адрес localhost:3000/users/me обновляет информацию о пользователе в БД;
10. PATCH-запрос на адрес localhost:3000/users/me/avatar обновляет ссылку на аватар пользователя в БД;
11. PUT-запрос на адрес вида localhost:3000/cards/8340d0ec33270a25f2413b69/likes добавляет карточке лайк от пользователя в БД;
12. DELETE-запрос на адрес вида localhost:3000/cards/8340d0ec33270a25f2413b69/likes удаляет лайк от пользователя из карточки в БД;
13. При запросе на несуществующий адрес, API вернёт 404 статус ответа и JSON: { "message": "Запрашиваемый ресурс не найден" }.

#### Установка и запуск проекта
1. Скачать сборку архивом или используя команду:  
```git clone git@github.com:OlegSh-dev/Node-1.git```  
2. Запустить установку зависимостей через терминал:  
```npm i```  
3. Выбрать необходимый вариант запуска:  
```
# production - запуск сервера  
npm run start
# develop - запуск сервера с hot reload  
npm run dev
```
